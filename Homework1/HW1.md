# Make Cats Free v0.1

- [Make Cats Free v0.1](#make-cats-free-v01)
  - [Глоссарий](#глоссарий)
    - [Акторы](#акторы)
    - [Внешние сервисы](#внешние-сервисы)
  - [Определение элементов системы](#определение-элементов-системы)
    - [Event Storming](#event-storming)
    - [Модель данных](#модель-данных)
      - [Модель без ES](#модель-без-es)
      - [Модель с ES](#модель-с-es)
      - [Обоснования](#обоснования)
    - [Модель коммуникаций](#модель-коммуникаций)
  - [Выбор структуры проекта](#выбор-структуры-проекта)
  - [Описание для разработчиков](#описание-для-разработчиков)
    - [Обоснование](#обоснование)
  - [Спорные и критичные места](#спорные-и-критичные-места)

## Глоссарий

### Акторы

**Воркер** - кот-сотрудник MCF, он же исполнитель заказа

**Кот-тестировщик** - клиент компании MCF, по совместительству - сотрудник компании Happy cat box (HCB)

**Менеджер** - сотрудник компании MCF, следящий за качеством исполнения заказа

### Внешние сервисы

**Золотая шляпа** - платежная система для выплат сотрудникам MCF

**Подрядчик fur-tune печений** - компания, под заказ поставляющая печенья с предсказаниями для клиентов

**Happy Cat Box** - компания-заказчик, она же родительская компания для MCF, поставляет клиентов(своих сотрудников)

**mailer** - внешний сервис рассылки уведомлений на почту

## Определение элементов системы

### Event Storming

[Доска с Event Storming](https://app.holst.so/share/b/d67069e4-d50a-49d9-8d96-9ee8dcb0a1a6)

### Модель данных

#### Модель без ES

![alt text](/Homework1/Service%20Data%20Model%20MCF.svg)
[Отдельным файлом](/Homework1/Service%20Data%20Model%20MCF.pdf)

#### Модель с ES

![alt text](/Homework1/Full%20Data%20Model.svg)
[Отдельным файлом](/Homework1/Full%20Data%20Model.pdf)

#### Обоснования

Модель данных, составленная без оглядки на ES модель отличается от итоговой набором блоков, поскольку она более техническая и подразумевает выделение блока хранения данных о пользователях и блока для склада расходных материалов, которые имеют смысл с технической точки зрения, но выделить их в бизнес процессе не удалось.

Дальнейшая работа ведется с моделью, основанной на ES, поскольку того требует задание, однако в реальном кейсе я бы основывался на технической модели.

### Модель коммуникаций

Вот в этом я вообще не успел разобраться, поэтому этот блок тут отсутствует, по крайней мере пока что

## Выбор структуры проекта

| Условие                                           | Микросервисы                                                                                 | Монолит                                                                                                                                                             |
| ------------------------------------------------- | -------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Низкий TTM                                        | Легко вносить изменения в компоненты, сложности с CI/CD и инфраструктурой                    | Нужна качественно продуманная модульность, инфраструктура значительно проще                                                                                         |
| Низкая нагрузка системы                           | Больше потеряем на взаимодействии между сервисами, чем выиграем от распределенности нагрузки | В силу низкой нагрузки более предпочтительный вариант, поскольку запланированная нагрузка не так отразится на быстродействии системы как множество сетевых запросов |
| Необходимо быстро проверять гипотезы              | Те же аргументы и выводы что у условия TTM                                                   | Те же аргументы и выводы что у условия TTM                                                                                                                          |
| *Низкая стоимость разработки - внутренний продукт | Высокие затраты на инфраструктуру и разработку, спорно меньшие затраты на поддержку          | Относительно низкие затраты на инфраструктуру и разработку, спорно высокие затраты на поддержку                                                                     |

В итоге выбираю монолит как более подходящий для этого набора условий вариант

## Описание для разработчиков

![структура системы](/Homework1/Структура%20системы.svg)

### Обоснование

Выбор реляционной БД обусловлен множество явно связанных между собой данных, таким образом можно упростить логику приложения засчет использования возможностей СУБД.

Конкретно postrgresql выбран потому что:

- open-source
- из аналогов наиболее развит

Выбор ruby в качестве языка разработки и rails в качестве фреймворка обусловлен одной конкретной причиной - судя по HCB (на текущий момент) разработка будет вестись с использованием этих технологий, MCF - внутренний продукт для небольшой аудитории, нанимать команду разработки специально под него с использованием отдельных технологий кажется нецелесообразным.

## Спорные и критичные места

- У заказчика есть опасения DDoS атак на отправку анкет кандидатов, однако стоит уделить внимание защите в целом, поскольку это не единственный API который будет "торчать наружу"
- В текущей реализации могут возникнуть проблемы с реализацией модульности в монолите
- Внутренний менеджерский аукцион даже без проведения транзакций может вызвать вопросы при возможном аудите
