# Make Cats Free v0.2

- [Make Cats Free v0.2](#make-cats-free-v02)
  - [Поддомены MCF](#поддомены-mcf)
    - [Распределение поддоменов по категориям](#распределение-поддоменов-по-категориям)
    - [Почему так](#почему-так)
    - [Что разошлось с ES из первого урока и почему](#что-разошлось-с-es-из-первого-урока-и-почему)
      - [Контекст "Ведение заказа" разделен на 2 части](#контекст-ведение-заказа-разделен-на-2-части)
      - [Контекст/поддомен "Управление расходниками" отсутствует](#контекстподдомен-управление-расходниками-отсутствует)
      - [Присутствует контекст "Биллинг"](#присутствует-контекст-биллинг)
    - [Обновленная модель данных](#обновленная-модель-данных)
  - [Характеристики, важные для проекта](#характеристики-важные-для-проекта)
  - [Структура системы](#структура-системы)
    - [Обоснование по характеристикам](#обоснование-по-характеристикам)
    - [Обоснование по личному опыту](#обоснование-по-личному-опыту)
      - [Почему не монолит](#почему-не-монолит)
      - [Почему не микросервисы](#почему-не-микросервисы)
    - [Предлагаемая схема](#предлагаемая-схема)

## Поддомены MCF

[Core Domain Chart](https://app.holst.so/share/b/6d3e25d5-bfb5-4be8-9046-df7a5c1b9739?objectId=c277e51d-0ba2-43b5-95c5-fb7903a7f6a5)

- Найм сотрудников
- Привлечение клиентов
- Управление расходниками
- Матчинг воркеров клиентам
- Управление заказами
- Аукцион менеджеров

### Распределение поддоменов по категориям

[Схема поддоменов](https://app.holst.so/share/b/6d3e25d5-bfb5-4be8-9046-df7a5c1b9739?objectId=432095cc-a1d1-4d68-8c7c-99cb783a20ef)

| Поддомен                  | Тип        |
| ------------------------- | ---------- |
| Матчинг воркеров клиентам | core       |
| Управление заказами       | core       |
| Найм сотрудников          | supporting |
| Аукцион менеджеров        | supporting |
| Привлечение клиентов      | supporting |
| Управление расходниками   | generic    |

### Почему так

Инновационная система матчинга воркеров клиентам это то что отличает MCF от любых других компаний в отрасли, соответственно это core поддомен. Эта часть бизнес логики будет подвержена наиболее частым изменениям и эти изменения должны доставляться как можно быстрее.

Управление заказами я также отнес к core поддоменам, поскольку хоть это и не уникальная фича MCF, однако это тот продукт, который компания продает своим пользователям, он имеет крайне важное значение

Управление расходниками это generic поддомен, поскольку это довольно распространенная задача, уже много раз решенная множеством компаний, можно подобрать готовое решение, например купить CRM "Котрикс24"

Найм сотрудников это supporting поддомен, у него есть свои характерные особенности и он необходим для работы компании, однако не является определяющим

Привлечение клиентов это также supporting поддомен, он довольно важен для бизнеса, но в то же время именно **привлекать** клиентов не нужно, в систему они попадают автоматически при устройстве в Happy Cat Box

Аукцион менеджеров это supporting поддомен, он абсолютно точно не является определяющим для работы компании, нужен исключительно для мотивации менеджерского звена и выделять на него серьезные ресурсы не имеет смысла, но нельзя сказать что это распространенная задача, которую решают многие компании, по крайней мере не таким способом

### Что разошлось с ES из первого урока и почему

[ES модель из первого урока](https://app.holst.so/share/b/d67069e4-d50a-49d9-8d96-9ee8dcb0a1a6)
[Обновленная ES модель](https://app.holst.so/share/b/6d3e25d5-bfb5-4be8-9046-df7a5c1b9739?objectId=a6169140-c217-4be5-b5e7-be33741e7bea)

#### Контекст "Ведение заказа" разделен на 2 части

Разделение работы с заказом на формирование и обработку имело смысл с точки зрения решения по структуре проекта, которое я видимо полуосознанно принял заранее как разработчик - в рамках монолитного проекта это логическое разделение позволяет разнести эти два процесса на два разных контроллера с набором эндпоинтов, я не особо думал с точки зрения бизнеса

По идее с точки зрения бизнеса все это один процесс, который начинается с создания заказа клиентом и заканчивается его завершением - удачным или нет

#### Контекст/поддомен "Управление расходниками" отсутствует

Это показалось мне просто частью формирования заказа, и с точки зрения **только лишь** ES это как по мне логично - это всего лишь две команды "подобрать расходники" и "заказать печенье", однако это более сложный процесс

#### Присутствует контекст "Биллинг"

Это добавление технического подхода к описанию системы, сам по себе биллинг смысла не имеет

### Обновленная модель данных

![data model](/Homework2/Data%20Model.svg)

[Модель данных отдельным файлом](/Homework2/Data%20Model.pdf)

## Характеристики, важные для проекта

Какие даны вводные:

- Бизнесу необходим низкий ТТМ (Time To Market), чтобы конкурировать на рынке.
- Общая нагрузка на систему не будет превышать 10 заказов в день и 100 клиентов. Воркеров будет около 20 котов.
- Для бизнеса критично проверять новые гипотезы по отсеву котов и изменять уже существующие с максимальной скоростью и надёжностью.

| Запрос                            | Характеристики                      |
| --------------------------------- | ----------------------------------- |
| Низкий TTM                        | agility, testability, deployability |
| Низкая нагрузка на систему        | scalability имеет низкий приоритет  |
| Критично проверять новые гипотезы | modifiability                       |
| *Низкие затраты на разработку     | cost                                |

*Предположительно, додумка автора

Итого, важные для нас характеристики

- agility
- cost
- deployability
- modifiability
- testability

## Структура системы

Исходя из предложенной Ибрагимом таблицы со сравнением архитектурных подходов по характеристикам, а также на основании личного опыта, я считаю что наиболее подходящий для данного проекта подход - service-based

### Обоснование по характеристикам

- **agility** - сильно выигрывает у монолитных решений, незначительно уступает микросервисам
- **cost** - незначительно уступает монолитным решениям, сильно выигрывает у микросервисов
- **deployability**, **testability** - сильно выигрывает у монолитных решений, сопоставим с микросервисами
- **modifiability** - почему-то в таблице Ибрагима уступает модульному монолиту, однако при грамотном разделении на контексты *как мне кажется* сравним с микросервисами

### Обоснование по личному опыту

#### Почему не монолит

- Есть несколько частей, которые достаточно независимы друг от друга, чтобы их можно было "расцепить"
- Есть необходимость быстро менять отдельные части системы для проверки гипотез

#### Почему не микросервисы

- Недостаточная "гранулированность" частей системы, чтобы их можно было раздробить на микросервисы
- Чересчур высокие затраты на инфраструктуру и хранение данных
- Связанность данных между контекстами

### Предлагаемая схема

![system structure](/Homework2/System%20structure.svg)

[Схема системы отдельным файлом](/Homework2/System%20structure.pdf)